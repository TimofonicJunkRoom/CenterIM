AC_INIT(aclocal.m4)
AM_INIT_AUTOMAKE(kkconsui, 0.1)

AC_PROG_CC
AC_PROG_CXX
AC_PROG_RANLIB

###	use option --with-fribidi to compile with fribidi support
AC_ARG_WITH(fribidi,
	[  --with-fribidi=[DIR]    enable Hebrew and Arabic support using fribidi
                          library in DIR],
	[with_fribidi=$withval],
	[with_fribidi=no])

test "$with_fribidi" = "yes" && AC_DEFINE(KTOOL_USE_FRIBIDI)

if test "$with_fribidi" = "yes"; then
    for ac_dir in /usr/local /usr; do
        if test -f "$ac_dir/include/fribidi/fribidi.h"; then
            with_fribidi=$ac_dir
            break;
        fi
    done
fi

if test -n "$with_fribidi" -a "$with_fribidi" != "no"; then
    if test "$with_fribidi" = "yes"; then with_fribidi="/usr"; fi

    if test -r $with_fribidi/include/fribidi/fribidi.h; then
        echo "enabling FriBiDi support in $with_fribidi"
	CXXFLAGS="$CXXFLAGS `$with_fribidi/bin/fribidi-config --cflags`"
	LIBS="$LIBS `$with_fribidi/bin/fribidi-config --libs`"
    fi

    AC_DEFINE(KTOOL_USE_FRIBIDI)
else
    echo 'disabling FriBiDi support...'
fi

AC_OUTPUT(Makefile include/Makefile src/Makefile)
